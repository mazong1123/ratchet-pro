/*!
 * =====================================================
 * RatchetPro v1.0.0 (https://github.com/mazong1123/ratchet-pro)
 * Copyright 2015 mazong1123
 * Licensed under MIT (https://github.com/mazong1123/ratchet-pro/blob/master/LICENSE)
 *
 * v1.0.0 designed by @mazong1123.
 * forked from https://github.com/twbs/ratchet 
 * =====================================================
 */
!function(){"use strict";function a(a){this.element="string"==typeof a?document.querySelector(a):a,this.element&&this.listen()}a.prototype={x:NaN,y:NaN,startDistance:NaN,startAngle:NaN,mouseIsDown:!1,listen:function(){function a(a,b){var c,d,e;if(a){if("compareDocumentPosition"in b)return!!(16&b.compareDocumentPosition(a));if("contains"in b)return b!==a&&b.contains(a);for(c=b.getElementsByTagName("*"),d=0;e=c[d++];)if(e===a)return!0;return!1}}var b=this.activate.bind(this),c=this.deactivate.bind(this);this.element.addEventListener("mouseover",function(c){var d=c.relatedTarget;d===this||a(d,this)||b()}),this.element.addEventListener("mouseout",function(b){var d=b.relatedTarget;d===this||a(d,this)||c(b)})},activate:function(){this.active||(this.element.addEventListener("mousedown",this.touchStart=this.touchStart.bind(this),!0),this.element.addEventListener("mousemove",this.touchMove=this.touchMove.bind(this),!0),this.element.addEventListener("mouseup",this.touchEnd=this.touchEnd.bind(this),!0),this.element.addEventListener("click",this.click=this.click.bind(this),!0),this.active=!0)},deactivate:function(a){this.active=!1,this.mouseIsDown&&this.touchEnd(a),this.element.removeEventListener("mousedown",this.touchStart,!0),this.element.removeEventListener("mousemove",this.touchMove,!0),this.element.removeEventListener("mouseup",this.touchEnd,!0),this.element.removeEventListener("click",this.click,!0)},click:function(a){},touchStart:function(a){a.synthetic||/input|textarea/.test(a.target.tagName.toLowerCase())||(this.mouseIsDown=!0,a.preventDefault(),a.stopPropagation(),this.fireTouchEvents("touchstart",a))},touchMove:function(a){a.synthetic||(a.preventDefault(),a.stopPropagation(),this.move(a.clientX,a.clientY),this.mouseIsDown&&this.fireTouchEvents("touchmove",a))},touchEnd:function(a){a.synthetic||(this.mouseIsDown=!1,a.preventDefault(),a.stopPropagation(),this.fireTouchEvents("touchend",a),this.target&&(this.target.dispatchEvent(this.createMouseEvent("mouseover",a)),this.target.dispatchEvent(this.createMouseEvent("mousemove",a)),this.target.dispatchEvent(this.createMouseEvent("mousedown",a))))},fireTouchEvents:function(a,b){var c=[],d=[];if(this.target){var e="on"+a;if(e in this.target&&(console.warn("Converting `"+e+"` property to event listener.",this.target),this.target.addEventListener(a,this.target[e],!1),delete this.target[e]),this.target.hasAttribute(e)){console.warn("Converting `"+e+"` attribute to event listener.",this.target);var f=new GLOBAL.Function("event",this.target.getAttribute(e));this.target.addEventListener(a,f,!1),this.target.removeAttribute(e)}var g=this.createMouseEvent(a,b);if(c.push(g),c.length>1){var h=c[0].pageX-c[1].pageX,i=c[0].pageY-c[1].pageY,j=Math.sqrt(Math.pow(h,2)+Math.pow(i,2)),k=Math.atan2(h,i)*(180/Math.PI),l="gesturechange";"touchstart"===a&&(l="gesturestart",this.startDistance=j,this.startAngle=k),"touchend"===a&&(l="gestureend"),c.forEach(function(a){var b=this.createMouseEvent.call(a._finger,l,a);d.push(b)}.bind(this)),c.concat(d).forEach(function(a){a.scale=j/this.startDistance,a.rotation=this.startAngle-k})}c.forEach(function(a){a.touches=c.filter(function(a){return~a.type.indexOf("touch")&&"touchend"!==a.type}),a.changedTouches=c.filter(function(b){return~b.type.indexOf("touch")&&b._finger.target===a._finger.target}),a.targetTouches=a.changedTouches.filter(function(a){return~a.type.indexOf("touch")&&"touchend"!==a.type})}),c.concat(d).forEach(function(a,b){a.identifier=b,a._finger.target.dispatchEvent(a)})}},createMouseEvent:function(a,b){var c=new MouseEvent(a,{view:window,detail:b.detail,bubbles:!0,cancelable:!0,target:this.target||b.relatedTarget,clientX:this.x||b.clientX,clientY:this.y||b.clientY,screenX:this.x||b.screenX,screenY:this.y||b.screenY,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,metaKey:b.metaKey,button:b.button});return c.synthetic=!0,c._finger=this,c},move:function(a,b){isNaN(a)||isNaN(b)?this.target=null:(this.x=a,this.y=b,this.mouseIsDown||(this.target=document.elementFromPoint(a,b)))}},window.FingerBlast=a}(),!function(){"use strict";window.CustomEvent||(window.CustomEvent=function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}),"undefined"==typeof window.RATCHET&&(window.RATCHET={}),window.RATCHET.enableMouseSupport=function(){"undefined"!=typeof window.FingerBlast&&new FingerBlast("body")};var a=new Array;window.RATCHET.getScript=function(b,c,d){if("undefined"==typeof $)return void console.log("JQuery not found. Cannot load and execute page scripts.");if(a.indexOf(b)>=0)return void(void 0!=c&&"function"==typeof c&&c(null,null,null));for(var e=document.getElementsByTagName("script"),f=0;f<e.length;f++){var g=e[f].getAttribute("src");if(g===b)return a.push(g),void(void 0!=c&&"function"==typeof c&&c(null,null,null))}var h={url:b,dataType:"script"};$.ajax(h).done(function(d,e,f){a.push(b),void 0!=c&&"function"==typeof c&&c(d,e,f)}).fail(function(a,b,c){void 0!=d&&"function"==typeof d&&d(a,b,c)})},window.RATCHET.getBrowserCapabilities=function(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];return{prefix:"-"+b+"-",transform:b[0].toUpperCase()+b.substr(1)+"Transform"}}(),window.RATCHET.getTransitionEnd=function(){var a=document.createElement("ratchet"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return b.transition}(),window.RATCHET.pageLoaderSettings={pageContentElementSelector:".content",pageNameElementAttributeName:"data-page",pageEntryScriptPath:"scripts",pageEntryScriptPrefix:"app-",pageContentReadyEventSuffix:"ContentReady"}}(),!function(){"use strict";var a=new CustomEvent("modalOpen",{bubbles:!0,cancelable:!0}),b=new CustomEvent("modalClose",{bubbles:!0,cancelable:!0}),c=function(a){for(var b,c=document.querySelectorAll("a");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},d=function(a){var b=c(a.target);return b&&b.hash?document.querySelector(b.hash):void 0};window.addEventListener("touchend",function(c){var e=d(c);if(e&&e.classList.contains("modal")){var f=a;e.classList.contains("active")&&(f=b),e.dispatchEvent(f),e.classList.toggle("active"),c.preventDefault()}})}(),!function(){"use strict";var a,b=function(a){for(var b,c=document.querySelectorAll("a");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},c=function(){a.style.display="none",a.removeEventListener(window.RATCHET.getTransitionEnd,c)},d=function(){var b=document.createElement("div");return b.classList.add("backdrop"),b.addEventListener("touchend",function(){a.addEventListener(window.RATCHET.getTransitionEnd,c),a.classList.remove("visible"),a.parentNode.removeChild(d)}),b}(),e=function(c){var d=b(c.target);if(d&&d.hash&&!(d.hash.indexOf("/")>0)){try{a=document.querySelector(d.hash)}catch(e){a=null}if(null!==a&&a&&a.classList.contains("popover"))return a}},f=function(a){var b=e(a);b&&(b.style.display="block",b.offsetHeight,b.classList.add("visible"),b.parentNode.appendChild(d))};window.addEventListener("touchend",f)}(),!function(){"use strict";function a(){f[q.id]=document.body.cloneNode(!0)}var b,c=function(){},d=20,e=sessionStorage,f={},g=new Array,h={"slide-in":"slide-out","slide-out":"slide-in",fade:"fade"},i={bartab:".bar-tab",barnav:".bar-nav",barfooter:".bar-footer",barheadersecondary:".bar-header-secondary"},j=function(a,b){q.id=a.id,b&&(a=m(a.id)),e[a.id]=JSON.stringify(a),window.history.replaceState(a.id,a.title,a.url)},k=function(){var a=q.id,b=JSON.parse(e.cacheForwardStack||"[]"),c=JSON.parse(e.cacheBackStack||"[]");for(c.push(a);b.length;)delete e[b.shift()];for(;c.length>d;)delete e[c.shift()];m(q.id).url&&window.history.pushState(null,"",m(q.id).url),e.cacheForwardStack=JSON.stringify(b),e.cacheBackStack=JSON.stringify(c)},l=function(a,b){var c="forward"===b,d=JSON.parse(e.cacheForwardStack||"[]"),f=JSON.parse(e.cacheBackStack||"[]"),g=c?f:d,h=c?d:f;q.id&&g.push(q.id),h.pop(),e.cacheForwardStack=JSON.stringify(d),e.cacheBackStack=JSON.stringify(f)},m=function(a){return JSON.parse(e[a]||null)||{}},n=function(a){var c=w(a.target);if(!(!c||a.which>1||a.metaKey||a.ctrlKey||b||location.protocol!==c.protocol||location.host!==c.host||!c.hash&&/#/.test(c.href)||c.hash&&c.href.replace(c.hash,"")===location.href.replace(location.hash,"")||"push"===c.getAttribute("data-ignore")))return c},o=function(a){var b=n(a);b&&(a.preventDefault(),q({url:b.href,hash:b.hash,timeout:b.getAttribute("data-timeout"),transition:b.getAttribute("data-transition")}))},p=function(a){var b,c,d,g,j,k,n,o,p=a.state;if(p&&e[p]){if(j=q.id<p?"forward":"back",l(p,j),d=m(p),g=f[p],d.title&&(document.title=d.title),"back"===j?(n=JSON.parse("back"===j?e.cacheForwardStack:e.cacheBackStack),o=m(n[n.length-1])):o=d,"back"===j&&!o.id)return q.id=p;if(k="back"===j?h[o.transition]:o.transition,!g)return q({id:d.id,url:d.url,title:d.title,timeout:d.timeout,transition:k,ignorePush:!0});if(o.transition){d=y(d,".content",g.cloneNode(!0));for(b in i)i.hasOwnProperty(b)&&(c=document.querySelector(i[b]),d[b]?u(d[b],c):c&&c.parentNode.removeChild(c))}u((d.contents||g).cloneNode(!0),document.querySelector(".content"),k,function(){v()}),q.id=p,document.body.offsetHeight}},q=function(b){var d;b.container=b.container||b.transition?document.querySelector(".content"):document.body;var e=/^file:/.test(window.location.protocol);for(d in i)i.hasOwnProperty(d)&&(b[d]=b[d]||document.querySelector(i[d]));q.id||j({id:+new Date,url:window.location.href,title:document.title,timeout:b.timeout,transition:b.transition}),a();var f=g[b.url];if(void 0!==f)return t(f,b),void k();var h=q.xhr;h&&h.readyState<4&&(h.onreadystatechange=c,h.abort()),h=new XMLHttpRequest,e?h.open("GET",b.url,!1):(h.open("GET",b.url,!0),h.setRequestHeader("X-PUSH","true"),h.onreadystatechange=function(){b._timeout&&clearTimeout(b._timeout),4===h.readyState&&(200===h.status?r(h,b):s(b.url))}),b.timeout&&(b._timeout=setTimeout(function(){h.abort("timeout")},b.timeout)),h.send(),e&&(0===h.status||200===h.status?r(h,b):s(b.url)),h.readyState&&!b.ignorePush&&k()},r=function(a,b){var c=z(a,b);t(c,b),g[b.url]=c},s=function(a){throw new Error("Could not get: "+a)},t=function(a,b){var c,d;if(!a.contents)return x(b.url);if(a.title&&(document.title=a.title),b.transition)for(c in i)i.hasOwnProperty(c)&&(d=document.querySelector(i[c]),a[c]?u(a[c],d):d&&d.parentNode.removeChild(d));u(a.contents,b.container,b.transition,function(){j({id:b.id||+new Date,url:a.url,title:a.title,timeout:b.timeout,transition:b.transition},b.id),v()}),!b.ignorePush&&window._gaq&&_gaq.push(["_trackPageview"]),!b.hash},u=function(a,b,c,d){var e,f,g;if(c?(e=/in$/.test(c),"fade"===c&&(b.classList.add("in"),b.classList.add("fade"),a.classList.add("fade")),/slide/.test(c)&&(a.classList.add("sliding-in",e?"right":"left"),a.classList.add("sliding"),b.classList.add("sliding")),b.parentNode.insertBefore(a,b)):b?b.innerHTML=a.innerHTML:a.classList.contains("content")?document.body.appendChild(a):document.body.insertBefore(a,document.querySelector(".content")),c||d&&d(),"fade"===c){b.offsetWidth,b.classList.remove("in");var h=function(){b.removeEventListener(window.RATCHET.getTransitionEnd,h),a.classList.add("in"),a.addEventListener(window.RATCHET.getTransitionEnd,i)},i=function(){a.removeEventListener(window.RATCHET.getTransitionEnd,i),b.parentNode.removeChild(b),a.classList.remove("fade"),a.classList.remove("in"),d&&d()};b.addEventListener(window.RATCHET.getTransitionEnd,h)}if(/slide/.test(c)){var j=function(){a.removeEventListener(window.RATCHET.getTransitionEnd,j),a.classList.remove("sliding","sliding-in"),a.classList.remove(g),b.parentNode.removeChild(b),d&&d()};b.offsetWidth,g=e?"right":"left",f=e?"left":"right",b.classList.add(f),a.classList.remove(g),a.addEventListener(window.RATCHET.getTransitionEnd,j)}},v=function(){var a=new CustomEvent("push",{detail:{state:m(q.id)},bubbles:!0,cancelable:!0});window.dispatchEvent(a)},w=function(a){for(var b,c=document.querySelectorAll("a");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},x=function(a){window.history.replaceState(null,"","#"),window.location.replace(a)},y=function(a,b,c){var d,e={};for(d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);return Object.keys(i).forEach(function(a){var b=c.querySelector(i[a]);b&&b.parentNode.removeChild(b),e[a]=b}),e.contents=c.querySelector(b),e},z=function(a,b){var c,d,e={},f=a.responseText;if(e.url=b.url,!f)return e;/<html/i.test(f)?(c=document.createElement("div"),d=document.createElement("div"),c.innerHTML=f.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],d.innerHTML=f.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]):(c=d=document.createElement("div"),c.innerHTML=f),e.title=c.querySelector("title")||document.querySelector("title");var g="innerText"in e.title?"innerText":"textContent";return e.title=e.title&&e.title[g].trim(),b.transition?e=y(e,".content",d):e.contents=d,e};window.addEventListener("touchstart",function(){b=!1}),window.addEventListener("touchmove",function(){b=!0}),window.addEventListener("touchend",o),window.addEventListener("click",function(a){n(a)&&a.preventDefault()}),window.addEventListener("popstate",p),window.PUSH=q,window.RATCHET.push=q}(),!function(){"use strict";var a=function(a){for(var b,c=document.querySelectorAll(".segmented-control .control-item");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a};window.addEventListener("touchend",function(b){var c,d,e,f=a(b.target),g="active",h="."+g;if(f&&(c=f.parentNode.querySelector(h),c&&c.classList.remove(g),f.classList.add(g),f.hash&&(e=document.querySelector(f.hash)))){d=e.parentNode.querySelectorAll(h);for(var i=0;i<d.length;i++)d[i].classList.remove(g);e.classList.add(g)}}),window.addEventListener("click",function(b){a(b.target)&&b.preventDefault()})}(),!function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=window.RATCHET.getBrowserCapabilities.prefix,p=window.RATCHET.getBrowserCapabilities.transform,q=function(a){for(var b,c=document.querySelectorAll(".slider > .slide-group");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a},r=function(){var a=c.style[p].match(/translate3d\(([^,]*)/),b=a?a[1]:0;return parseInt(b,10)},s=function(a){var b=a?0>d?"ceil":"floor":"round";k=Math[b](r()/(m/c.children.length)),k+=a,k=Math.min(k,0),k=Math.max(-(c.children.length-1),k)},t=function(f){if(c=q(f.target)){var k=c.querySelector(".slide");m=k.offsetWidth*c.children.length,l=void 0,j=c.offsetWidth,i=1,g=-(c.children.length-1),h=+new Date,a=f.touches[0].pageX,b=f.touches[0].pageY,d=0,e=0,s(0),c.style[o+"transition-duration"]=0}},u=function(h){h.touches.length>1||!c||(n||(a+=h.touches[0].pageX-a-1),d=h.touches[0].pageX-a,e=h.touches[0].pageY-b,a=h.touches[0].pageX,b=h.touches[0].pageY,"undefined"==typeof l&&n&&(l=Math.abs(e)>Math.abs(d)),l||(f=d/i+r(),h.preventDefault(),i=0===k&&d>0?a/j+1.25:k===g&&0>d?Math.abs(a)/j+1.25:1,c.style[p]="translate3d("+f+"px,0,0)",n=!0))},v=function(a){c&&!l&&(n=!1,s(+new Date-h<1e3&&Math.abs(d)>15?0>d?-1:1:0),f=k*j,c.style[o+"transition-duration"]=".2s",c.style[p]="translate3d("+f+"px,0,0)",a=new CustomEvent("slide",{detail:{slideNumber:Math.abs(k)},bubbles:!0,cancelable:!0}),c.parentNode.dispatchEvent(a))};window.addEventListener("touchstart",t),window.addEventListener("touchmove",u),window.addEventListener("touchend",v)}(),!function(){"use strict";var a={},b=!1,c=!1,d=!1,e=window.RATCHET.getBrowserCapabilities.transform,f=function(a){for(var b,c=document.querySelectorAll(".toggle");a&&a!==document;a=a.parentNode)for(b=c.length;b--;)if(c[b]===a)return a};window.addEventListener("touchstart",function(c){if(c=c.originalEvent||c,d=f(c.target)){var e=d.querySelector(".toggle-handle"),g=d.clientWidth,h=e.clientWidth,i=d.classList.contains("active")?g-h:0;a={pageX:c.touches[0].pageX-i,pageY:c.touches[0].pageY},b=!1}}),window.addEventListener("touchmove",function(f){if(f=f.originalEvent||f,!(f.touches.length>1)&&d){var g=d.querySelector(".toggle-handle"),h=f.touches[0],i=d.clientWidth,j=g.clientWidth,k=i-j;if(b=!0,c=h.pageX-a.pageX,!(Math.abs(c)<Math.abs(h.pageY-a.pageY))){if(f.preventDefault(),0>c)return g.style[e]="translate3d(0,0,0)";if(c>k)return g.style[e]="translate3d("+k+"px,0,0)";g.style[e]="translate3d("+c+"px,0,0)",d.classList[c>i/2-j/2?"add":"remove"]("active")}}}),window.addEventListener("touchend",function(a){if(d){var f=d.querySelector(".toggle-handle"),g=d.clientWidth,h=f.clientWidth,i=g-h,j=!b&&!d.classList.contains("active")||b&&c>g/2-h/2;j?f.style[e]="translate3d("+i+"px,0,0)":f.style[e]="translate3d(0,0,0)",d.classList[j?"add":"remove"]("active"),a=new CustomEvent("toggle",{detail:{isActive:j},bubbles:!0,cancelable:!0}),d.dispatchEvent(a),b=!1,d=!1}})}(),!function(){"use strict";var a=function(){var a=window.RATCHET.pageLoaderSettings,b=document.querySelector(a.pageContentElementSelector),c=b.getAttribute(a.pageNameElementAttributeName);if(null!=c&&c.length>0){var d=a.pageEntryScriptPath+"/"+a.pageEntryScriptPrefix+c+".js";window.RATCHET.getScript(d,function(){var b=c+a.pageContentReadyEventSuffix,d=new CustomEvent(b,{detail:{},bubbles:!0,cancelable:!0});document.dispatchEvent(d)},function(a,b,c){console.log(b),console.log(c)})}};window.addEventListener("push",a),window.RATCHET.changePage=function(a,b){var c={url:a};void 0!=b&&(c.transition=b),PUSH(c)}}();